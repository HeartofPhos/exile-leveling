import{j as e,c as l,i as E,k as S,r as m,Q as w,t as I,b as f,d as v,D as k,w as L}from"./index-COjbyIN6.js";import{getRouteFiles as g,buildRouteSource as C}from"./index-DfYW0qUq.js";import{f as u}from"./form-styles.module-DoXu75JQ.js";import{C as N,T as F,M as O}from"./index-DUmX0f8A.js";import{b as T}from"./index.esm-BpB-hlxl.js";import"./index-BsDe6VTx.js";var h;(t=>{t.FragmentDescriptionLookup={kill:[{description:"Kill a monster, certain bosses unlock waypoints",parameters:[{name:"text",description:"Text to display"}]}],arena:[{description:"Sub-areas inside true areas",parameters:[{name:"text",description:"Text to display"}]}],area:[{description:"Lookup an area",parameters:[{name:"area_id",description:"Area Id used internally by Path Of Exile"}]}],enter:[{description:"Enter an area",parameters:[{name:"area_id",description:"Area Id used internally by Path Of Exile"}]}],logout:[{description:"Logout or Exit to Character Selection, removes portals",parameters:[]}],waypoint:[{description:"A waypoint",parameters:[]},{description:"Use a waypoint",parameters:[{name:"area_id",description:"Area Id used internally by Path Of Exile"}]}],waypoint_get:[{description:"Unlocks the waypoint for the current zone",parameters:[]}],portal:[{description:"Sets portal to the current area",parameters:[{name:"set",description:"keyword"}]},{description:"Use the portal in the current area, places a portal if required",parameters:[{name:"use",description:"keyword"}]}],quest:[{description:"Hand in a quest and receive all reward offers, generates gem steps",parameters:[{name:"quest_id",description:"Quest Id used internally by Path Of Exile"}]},{description:"Hand in a quest and receive specified reward offer, generates gem steps",parameters:[{name:"quest_id",description:"Quest Id used internally by Path Of Exile"},{name:"reward_offer_id",description:"Reward Offer Id used internally by Path Of Exile"}]}],quest_text:[{description:"Quest text",parameters:[{name:"text",description:"Text to display"}]}],generic:[{description:"Generic text",parameters:[{name:"text",description:"Text to display"}]}],reward_quest:[{description:"Quest rewards a player should take",parameters:[{name:"text",description:"Text to display"}]}],reward_vendor:[{description:"Vendor rewards a player should buy",parameters:[{name:"text",description:"Text to display"},{name:"cost",description:"Currency cost, wisdom/transmutation/alteration/chance/alchemy"}]}],trial:[{description:"Complete the ascendancy trial in the current area",parameters:[]}],ascend:[{description:"Complete The Lord's Labyrinth",parameters:[{name:"version",description:"Version to complete, normal/cruel/merciless/eternal"}]}],crafting:[{description:"Get the crafting recipe in the current area",parameters:[]}],dir:[{description:"A direction",parameters:[{name:"number",description:"Number of degrees in multiples of 45, where 0 = Up"}]}],copy:[{description:"One click copy",parameters:[{name:"text",description:"Text to copy"}]}]}})(h||(h={}));const q="_selectList_304tp_1",P="_selectListItem_304tp_16",$="_selected_304tp_21",x={selectList:q,selectListItem:P,selected:$};function A({items:t,selectedIndex:r,getLabel:d,onSelect:s}){return e.jsx("div",{className:l(x.selectList),children:t.map((n,a)=>e.jsx("div",{className:l(E.itemRound,x.selectListItem,{[S.hoverPrimary]:r!==a,[x.selected]:r===a}),onClick:()=>{s(a)},children:d(a)},a))})}const D="_workspace_1b1ja_1",U={workspace:D},B={preProcessors:{pattern:/#section *(.*)|#endif|#ifdef *(.*)|#ifndef *(.*)/,inside:{"keyword control-flow":/#\w+/,variable:/.+/}},subStep:{alias:"keyword control-flow",pattern:/#sub/},comment:/#.*/,fragment:{pattern:/\{.*?\}|\{.*\}?/,inside:{keyword:{pattern:/(\{)[^|{}]+/,lookbehind:!0},"keyword control-flow":/[|{}]/,property:/.+/}}};function Q({workingFiles:t,isDirty:r,onUpdate:d}){const s=m.useRef(null),[n,a]=m.useState(0);return m.useEffect(()=>{n>=t.length&&a(0)},[t]),m.useEffect(()=>{s.current!==null&&s.current.scrollTo(0,0)},[n,s]),e.jsx("div",{className:l(U.workspace),children:n<t.length&&e.jsxs(e.Fragment,{children:[e.jsx(A,{items:t,selectedIndex:n,onSelect:a,getLabel:o=>{const i=t[o];return r(i,o)?i.name+"*":i.name}}),e.jsx(N,{ref:s,grammar:B,value:t[n].contents,onValueChange:o=>{const i=[...t];i[n].contents=o,d(i)}})]})})}const z="_editorForm_1knwi_1",G="_help_1knwi_5",_={editorForm:z,help:G};function b(t){return t.map(r=>({...r}))}const H=[t=>{const r=/pastebin\.com\/(.+)$/.exec(t);return r?`pastebin.com/raw/${r[1]}`:null}];function W({routeFiles:t,onSubmit:r,onReset:d}){const[s,n]=m.useState([]),[a,o]=m.useState(!1),[i,y]=m.useState(!1);m.useEffect(()=>{n(b(t))},[t]);const j=()=>{r(g(s.map(c=>c.contents)))};return m.useEffect(()=>{const c=p=>{(p.metaKey||p.ctrlKey)&&p.key==="s"&&(p.preventDefault(),j())};return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[s]),e.jsxs(e.Fragment,{children:[e.jsx(F,{size:"large",label:"Import Route",isOpen:a,onRequestClose:()=>o(!1),onSubmit:c=>w.promise(async()=>{if(!c)return;const p=await I(c,H),R=g([p]);r(R)},{pending:"Importing Route",success:"Import Success",error:"Import Failed"})}),e.jsx(O,{size:"large",isOpen:i,onRequestClose:()=>y(!1),children:e.jsx(K,{})}),e.jsxs("div",{className:l(u.form,_.editorForm),children:[e.jsx(Q,{workingFiles:s,isDirty:(c,p)=>p<t.length&&t[p].contents!==c.contents,onUpdate:n}),e.jsxs("div",{className:l(u.groupRight),children:[e.jsx(T,{size:24,onClick:()=>{y(!0)}}),e.jsx("button",{className:l(u.formButton),onClick:()=>{const c=C(s);navigator.clipboard.writeText(c),w.success("Exported to Clipboard")},children:"Export"}),e.jsx("button",{className:l(u.formButton),onClick:()=>{o(!0)},children:"Import"}),e.jsx("button",{className:l(u.formButton),onClick:()=>{n(b(t)),d()},children:"Reset"}),e.jsx("button",{className:l(u.formButton),onClick:()=>{j()},children:"Save"})]})]}),e.jsx("hr",{})]})}function K(){const t=Object.entries(h.FragmentDescriptionLookup).map(([r,d],s)=>e.jsx(f.Fragment,{children:d.map((n,a)=>e.jsxs(f.Fragment,{children:[s!==0&&e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("span",{className:"token keyword control-flow",children:"{"}),e.jsx("span",{className:"token keyword",children:r}),n.parameters.map((o,i)=>e.jsxs(f.Fragment,{children:[e.jsx("span",{className:"token keyword control-flow",children:"|"}),e.jsx("span",{className:"token property",children:o.name})]},`variant-parameters-${i}`)),e.jsx("span",{className:"token keyword control-flow",children:"}"}),e.jsx("br",{}),e.jsx("span",{children:n.description}),e.jsx("br",{}),n.parameters.map((o,i)=>e.jsxs(f.Fragment,{children:[e.jsx("span",{className:"token property",children:o.name}),":"," ",o.description,e.jsx("br",{})]},`variant-description-${i}`))]})]},`variant-${a}`))},r));return e.jsx("div",{className:l(_.help),children:f.Children.toArray(t)})}function ee(){const[t,r]=v(k),d=L(k);return e.jsx(W,{routeFiles:t,onSubmit:s=>r(s),onReset:()=>d()})}export{ee as default};
